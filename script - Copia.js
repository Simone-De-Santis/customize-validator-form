$(document).ready(function () {
	const objLocalizationPath = {
		italia :{
			localization: "italia",
			prefixCellular: ["+39", "0039"],
			prefixCompanyCellular: [
				"330",
				"333",
				"334",
				"335",
				"336",
				"337",
				"338",
				"339",
				"360",
				"363",
				"366",
				"368",
				"352",
				"340",
				"342",
				"345",
				"346",
				"347",
				"348",
				"349",
				"320",
				"323",
				"327",
				"328",
				"329",
				"380",
				"383",
				"388",
				"389",
				"390",
				"391",
				"392",
				"393",
				"397",
				"331",
				"370",
				"353",
				"375",
				"379",
				"373",
				"350",
				"351",
				"382",
				"376",
				"371",
				"377",
				"378",
			],
			prefixHomePhone: [
				"004191",
				"010",
				"011",
				"012",
				"012",
				"012",
				"012",
				"012",
				"013",
				"014",
				"014",
				"014",
				"014",
				"015",
				"016",
				"016",
				"016",
				"016",
				"017",
				"017",
				"017",
				"017",
				"017",
				"018",
				"018",
				"018",
				"018",
				"018",
				"019",
				"02",
				"030",
				"031",
				"032",
				"032",
				"032",
				"032",
				"033",
				"033",
				"034",
				"034",
				"034",
				"034",
				"034",
				"034",
				"035",
				"036",
				"036",
				"036",
				"036",
				"037",
				"037",
				"037",
				"037",
				"037",
				"037",
				"037",
				"038",
				"038",
				"038",
				"038",
				"038",
				"038",
				"039",
				"040",
				"041",
				"042",
				"042",
				"042",
				"042",
				"042",
				"042",
				"042",
				"042",
				"042",
				"043",
				"043",
				"043",
				"043",
				"043",
				"043",
				"043",
				"043",
				"043",
				"044",
				"044",
				"044",
				"045",
				"046",
				"046",
				"046",
				"046",
				"046",
				"047",
				"047",
				"047",
				"047",
				"048",
				"049",
				"050",
				"051",
				"052",
				"052",
				"052",
				"052",
				"052",
				"053",
				"053",
				"053",
				"053",
				"053",
				"054",
				"054",
				"054",
				"054",
				"054",
				"054",
				"054",
				"055",
				"056",
				"056",
				"056",
				"057",
				"057",
				"057",
				"057",
				"057",
				"057",
				"057",
				"058",
				"058",
				"058",
				"058",
				"058",
				"058",
				"059",
				"06070",
				"071",
				"072",
				"072",
				"073",
				"073",
				"073",
				"073",
				"073",
				"073",
				"073",
				"074",
				"074",
				"074",
				"074",
				"075",
				"076",
				"076",
				"076",
				"076",
				"077",
				"077",
				"077",
				"077",
				"077",
				"078",
				"078",
				"078",
				"078",
				"078",
				"078",
				"079",
				"080",
				"081",
				"082",
				"082",
				"082",
				"082",
				"082",
				"083",
				"083",
				"083",
				"083",
				"083",
				"085",
				"086",
				"086",
				"086",
				"086",
				"086",
				"087",
				"087",
				"087",
				"087",
				"087",
				"088",
				"088",
				"088",
				"088",
				"088",
				"089",
				"090",
				"091",
				"092",
				"092",
				"092",
				"092",
				"092",
				"093",
				"093",
				"093",
				"093",
				"093",
				"094",
				"094",
				"095",
				"096",
				"096",
				"096",
				"096",
				"096",
				"096",
				"096",
				"096",
				"097",
				"097",
				"097",
				"097",
				"097",
				"097",
				"098",
				"098",
				"098",
				"098",
				"098",
				"099",
			],
		}
	};


	$(".form").submit(function (e) {
		// preveniamo il default
		e.preventDefault();
		// prendiamo il valore del campo phonNumber
		const phoneNumber = $("#phonNumber").val().trim();
		let phoneNumberSanitize = "";
		// controlliamo se il data attribute della localizzazione è settato su italia per andare a formattare e validare il campo
		if ($("#phonNumber").attr("data-validate-country") == "italia") {
			/*! telefono (cellulare)
 				 - il numero di telefono deve essere italiano
 				 - non avere il prefisso internazionale
 				 - non deve avere trattini o puntini
 				 - a numero pulito da prefisso e puntini e altri simboli e trimmato deve avere un length di 10
 				 -- deve iniziare obbligatoriamente con 3... 
 				 ** prefisso +39 / 0039 italiano +378 san marino Malta +356 comune di campione +41 **
 				 esempio di numero telefonico +39 347 7464862
 				 +39 /0039 prefisso nazionale non obbligatorio per chiamate dall'italia 
 				 347 prefisso operatori (MNO) o (MVNO) sulla quale si potrebbe fare un controllo
 				 7464862 numero di 7 cifre che identificano il numero vero e proprio

 			 */
			// andiamo a creare un array con i valori numerici da controllare



			
			const arrPhoneNumber = phoneNumber.split("");
			if (
				arrPhoneNumber[0] == "+" &&
				arrPhoneNumber[1] == "3" &&
				arrPhoneNumber[2] == "9"
			) {
				arrPhoneNumber.splice(0, 3);
			}
			if (
				arrPhoneNumber[0] == "0" &&
				arrPhoneNumber[1] == "0" &&
				arrPhoneNumber[2] == "3" &&
				arrPhoneNumber[3] == "9"
			) {
				arrPhoneNumber.splice(0, 4);
			}
			//* array con tutti i numeri passati per il filtraggio sanitizing valore prendendo solo i numeri
			arrPhoneSanitize = arrPhoneNumber.filter((value) => Number(value));
			// controlliamo che il numero risultante è un numero di telefono che inizia con 3 e che il length sia maggiore o uguale a 9 facciamo il join per ritornare un numero completo
			if (
				arrPhoneSanitize[0] == 3 &&
				arrPhoneSanitize.length >= 9 &&
				arrPhoneSanitize.length <= 12
			) {
				phoneNumberSanitize = arrPhoneSanitize.join("");
			} else phoneNumberSanitize = "numero non valido";
		}
		console.log("numero iniziale", phoneNumber);
		console.log("numero sanificato", phoneNumberSanitize);
	});
});
